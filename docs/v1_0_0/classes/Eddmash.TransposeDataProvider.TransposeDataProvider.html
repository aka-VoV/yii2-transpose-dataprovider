<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>TransposeDataProvider v1.0.0 Docs » \Eddmash\TransposeDataProvider\TransposeDataProvider</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">TransposeDataProvider v1.0.0 Docs</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Namespaces</a></li>
<li><a href="../namespaces/Eddmash.html"><i class="icon-th"></i> Eddmash</a></li>
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">4</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<div xmlns:php="http://php.net/xsl" class="btn-toolbar">
<div class="btn-group visibility" data-toggle="buttons-checkbox">
<button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button>
</div>
<div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
</div>
<ul xmlns:php="http://php.net/xsl" class="side-nav nav nav-list">
<li class="nav-header">
<i title="Methods" class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method_getColsNames" title="getColsNames() :: Returns all the columns that relate to the data we are handling, this also includes any extra fields
that might have been passed."><span class="description">Returns all the columns that relate to the data we are handling, this also includes any extra fields
that might have been passed.</span><pre>getColsNames()</pre></a></li>
<li class="method public "><a href="#method_getColumnValue" title="getColumnValue() :: Gets a model and column name and returns the value of the column on the model."><span class="description">Gets a model and column name and returns the value of the column on the model.</span><pre>getColumnValue()</pre></a></li>
<li class="method public "><a href="#method_getDistinctColumns" title="getDistinctColumns() :: gets the columns that will be used in our final transposed data."><span class="description">gets the columns that will be used in our final transposed data.</span><pre>getDistinctColumns()</pre></a></li>
<li class="method public "><a href="#method_getDistinctRows" title="getDistinctRows() :: gets the rows of data that our data holds."><span class="description">gets the rows of data that our data holds.</span><pre>getDistinctRows()</pre></a></li>
<li class="method public "><a href="#method_getLowerRow" title="getLowerRow() :: Gets the row from which to start our data fetch."><span class="description">Gets the row from which to start our data fetch.</span><pre>getLowerRow()</pre></a></li>
<li class="method public "><a href="#method_getUpperRow" title="getUpperRow() :: Gets the row at which we stop fetching data."><span class="description">Gets the row at which we stop fetching data.</span><pre>getUpperRow()</pre></a></li>
<li class="method public "><a href="#method_init" title="init() :: {@inheritdoc}"><span class="description">{@inheritdoc}</span><pre>init()</pre></a></li>
<li class="method public "><a href="#method_setSort" title="setSort() :: {@inheritdoc}"><span class="description">{@inheritdoc}</span><pre>setSort()</pre></a></li>
</ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="method protected "><a href="#method__transpose" title="_transpose() :: This transposes the models passed in it desired output."><span class="description">This transposes the models passed in it desired output.</span><pre>_transpose()</pre></a></li>
<li class="method protected "><a href="#method_prepareKeys" title="prepareKeys() :: {@inheritdoc}"><span class="description">{@inheritdoc}</span><pre>prepareKeys()</pre></a></li>
<li class="method protected "><a href="#method_prepareModels" title="prepareModels() :: {@inheritdoc}"><span class="description">{@inheritdoc}</span><pre>prepareModels()</pre></a></li>
<li class="method protected "><a href="#method_prepareTotalCount" title="prepareTotalCount() :: In this case we return the number of distinct rows based on the groupField
{@inheritdoc}"><span class="description">In this case we return the number of distinct rows based on the groupField
{@inheritdoc}</span><pre>prepareTotalCount()</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i title="Properties" class="icon-custom icon-property"></i> Properties
                    <ul>
<li class="property public "><a href="#property_columnsField" title="$columnsField() :: The column in the columnQuery actually contains the records we need to use as column."><span class="description"></span><pre>$columnsField</pre></a></li>
<li class="property public "><a href="#property_extraFields" title="$extraFields() :: Other columns found on the $this-&gt;query that should be added to the transposed output."><span class="description"></span><pre>$extraFields</pre></a></li>
<li class="property public "><a href="#property_groupField" title="$groupField() :: This fields is used group together records in the $this-&gt;query into actual understandable rows of records."><span class="description"></span><pre>$groupField</pre></a></li>
<li class="property public "><a href="#property_valuesField" title="$valuesField() :: The column in the $this-&gt;query that actually contains the records we need to use as values for our columns."><span class="description"></span><pre>$valuesField</pre></a></li>
</ul>
</li>
<li class="nav-header private">» Private
                    <ul>
<li class="property private "><a href="#property__columns" title="$_columns() :: "><span class="description"></span><pre>$_columns</pre></a></li>
<li class="property private "><a href="#property__rows" title="$_rows() :: "><span class="description"></span><pre>$_rows</pre></a></li>
</ul>
</li>
</ul>
</div>
<div class="span8">
<a xmlns:php="http://php.net/xsl" id="\Eddmash\TransposeDataProvider\TransposeDataProvider"></a><ul xmlns:php="http://php.net/xsl" class="breadcrumb">
<li>
<a href="../index.html"><i title="Classes" class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/Eddmash.html">Eddmash</a></li>
<li>
<span class="divider">\</span><a href="../namespaces/Eddmash.TransposeDataProvider.html">TransposeDataProvider</a>
</li>
<li class="active">
<span class="divider">\</span><a href="../classes/Eddmash.TransposeDataProvider.TransposeDataProvider.html">TransposeDataProvider</a>
</li>
</ul>
<div xmlns:php="http://php.net/xsl" class="element class">
<p class="short_description">Transposes data returned by a query.</p>
<div class="details">
<div class="long_description"><p>Assuming our query outputs the following  :</p>
<pre>

student | subject | grade
--------------------------
 mat    | cre     | 52
 mat    | ghc     | 40
 mat    | physics | 60
 leon   | cre     | 70
 leon   | ghc     | 80
 leon   | physics | 10

</pre>
<p>and we need our data to look as below :</p>
<pre>

student | cre | ghc | physics
------------------------------
 mat    | 52  | 40  | 60
 leon   | 70  | 80  | 10

</pre>
<p>We achive this by doing :</p>
<pre><code class="language-php">
use Eddmash\TransposeDataProvider;

$dataProvider = new TransposeDataProvider([
     'query' =&gt; $query,
     'columnsField' =&gt; 'question_id',
     'groupField' =&gt; 'pollid',
     'valuesField' =&gt; 'response',
     'pagination' =&gt; [
         'pagesize' =&gt; $pageSize // in case you want a default pagesize
     ]
]);
</code></pre>
<p>By default the transposed output contains on the the columns found at \Eddmash\TransposeDataProvider\columnsField,
to get other columns present on the query add them to \Eddmash\TransposeDataProvider\extraFields</p>
<p>Class Transpose2DataProvider</p></div>
<table class="table table-bordered">
<tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr>
<tr>
<th>package</th>
<td><a href="../packages/Default.html">Default</a></td>
</tr>
</table>
<h3>
<i title="Methods" class="icon-custom icon-method"></i> Methods</h3>
<a id="method_getColsNames"></a><div class="element clickable method public method_getColsNames " data-toggle="collapse" data-target=".method_getColsNames .collapse" title="public">
<h2>Returns all the columns that relate to the data we are handling, this also includes any extra fields
that might have been passed.</h2>
<pre>getColsNames() : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a id="method_getColumnValue"></a><div class="element clickable method public method_getColumnValue " data-toggle="collapse" data-target=".method_getColumnValue .collapse" title="public">
<h2>Gets a model and column name and returns the value of the column on the model.</h2>
<pre>getColumnValue($model, null $column<code> = null</code>) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument"><h4>$model</h4></div>
<div class="subelement argument">
<h4>$column</h4>
<code>null</code>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a id="method_getDistinctColumns"></a><div class="element clickable method public method_getDistinctColumns " data-toggle="collapse" data-target=".method_getDistinctColumns .collapse" title="public">
<h2>gets the columns that will be used in our final transposed data.</h2>
<pre>getDistinctColumns() : array | array&lt;mixed,\yii\db\ActiveRecord&gt;</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>we use {see @columnsField } to determine the rows.</p></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code><code>array&lt;mixed,\yii\db\ActiveRecord&gt;</code>
</div>
</div></div>
</div>
<a id="method_getDistinctRows"></a><div class="element clickable method public method_getDistinctRows " data-toggle="collapse" data-target=".method_getDistinctRows .collapse" title="public">
<h2>gets the rows of data that our data holds.</h2>
<pre>getDistinctRows() : array | array&lt;mixed,\yii\db\ActiveRecord&gt;</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Note, this will not be a direct mapping of the rows of data in a table.</p>
<p>we use {see @groupField } to determine the rows.</p></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code><code>array&lt;mixed,\yii\db\ActiveRecord&gt;</code>
</div>
</div></div>
</div>
<a id="method_getLowerRow"></a><div class="element clickable method public method_getLowerRow " data-toggle="collapse" data-target=".method_getLowerRow .collapse" title="public">
<h2>Gets the row from which to start our data fetch.</h2>
<pre>getLowerRow(\yii\data\Pagination $pagination, $rows) : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$pagination</h4>
<code>\yii\data\Pagination</code>
</div>
<div class="subelement argument"><h4>$rows</h4></div>
<h3>Returns</h3>
<div class="subelement response"><code>integer</code></div>
</div></div>
</div>
<a id="method_getUpperRow"></a><div class="element clickable method public method_getUpperRow " data-toggle="collapse" data-target=".method_getUpperRow .collapse" title="public">
<h2>Gets the row at which we stop fetching data.</h2>
<pre>getUpperRow(\yii\data\Pagination $pagination, $rows) : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$pagination</h4>
<code>\yii\data\Pagination</code>
</div>
<div class="subelement argument"><h4>$rows</h4></div>
<h3>Returns</h3>
<div class="subelement response"><code>integer</code></div>
</div></div>
</div>
<a id="method_init"></a><div class="element clickable method public method_init " data-toggle="collapse" data-target=".method_init .collapse" title="public">
<h2>{@inheritdoc}</h2>
<pre>init() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_setSort"></a><div class="element clickable method public method_setSort " data-toggle="collapse" data-target=".method_setSort .collapse" title="public">
<h2>{@inheritdoc}</h2>
<pre>setSort($value) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument"><h4>$value</h4></div>
</div></div>
</div>
<a id="method__transpose"></a><div class="element clickable method protected method__transpose " data-toggle="collapse" data-target=".method__transpose .collapse" title="protected">
<h2>This transposes the models passed in it desired output.</h2>
<pre>_transpose($models) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The desired output is dictated by :
see @groupField
see @valuesField
see @columnsField</p></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:edd.cowan@gmail.com">Eddilbert Macharia (http://eddmash.com)</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument"><h4>$models</h4></div>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a id="method_prepareKeys"></a><div class="element clickable method protected method_prepareKeys " data-toggle="collapse" data-target=".method_prepareKeys .collapse" title="protected">
<h2>{@inheritdoc}</h2>
<pre>prepareKeys($models) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument"><h4>$models</h4></div>
</div></div>
</div>
<a id="method_prepareModels"></a><div class="element clickable method protected method_prepareModels " data-toggle="collapse" data-target=".method_prepareModels .collapse" title="protected">
<h2>{@inheritdoc}</h2>
<pre>prepareModels() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>Incase of pagination, we have to fetch the number of rows required. since we using a query that most of the
time will consist of several joins in order to get the data and the columns.</p>
<p>we will be using the where clause instead of the tradition offset/limit pair which work on a single table.
to paginate we add the where $column between start and end clause on the $query</p></div></div></div>
</div>
<a id="method_prepareTotalCount"></a><div class="element clickable method protected method_prepareTotalCount " data-toggle="collapse" data-target=".method_prepareTotalCount .collapse" title="protected">
<h2>In this case we return the number of distinct rows based on the groupField
{@inheritdoc}</h2>
<pre>prepareTotalCount() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<h3>
<i title="Properties" class="icon-custom icon-property"></i> Properties</h3>
<a id="property_columnsField"> </a><div class="element clickable property public property_columnsField" data-toggle="collapse" data-target=".property_columnsField .collapse" title="public">
<h2>The column in the columnQuery actually contains the records we need to use as column.</h2>
<pre>$columnsField : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_extraFields"> </a><div class="element clickable property public property_extraFields" data-toggle="collapse" data-target=".property_extraFields .collapse" title="public">
<h2>Other columns found on the $this-&gt;query that should be added to the transposed output.</h2>
<pre>$extraFields : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array()</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>For relational fields use the dot notation,  [student.role.name] this will add the role name of each student
to the transposed data.</p></div></div></div>
</div>
<a id="property_groupField"> </a><div class="element clickable property public property_groupField" data-toggle="collapse" data-target=".property_groupField .collapse" title="public">
<h2>This fields is used group together records in the $this-&gt;query into actual understandable rows of records.</h2>
<pre>$groupField : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>e.g. student in the example above.</p></div></div></div>
</div>
<a id="property_valuesField"> </a><div class="element clickable property public property_valuesField" data-toggle="collapse" data-target=".property_valuesField .collapse" title="public">
<h2>The column in the $this-&gt;query that actually contains the records we need to use as values for our columns.</h2>
<pre>$valuesField : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property__columns"> </a><div class="element clickable property private property__columns" data-toggle="collapse" data-target=".property__columns .collapse" title="private">
<h2>$_columns</h2>
<pre>$_columns </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property__rows"> </a><div class="element clickable property private property__rows" data-toggle="collapse" data-target=".property__rows .collapse" title="private">
<h2>$_rows</h2>
<pre>$_rows </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.8.5</a> and<br>
            generated on 2016-11-07T13:59:24+03:00.<br></footer></div>
</div>
</body>
</html>
